- request: GET '_ah/login?action=Login&admin=False&email=test%40example.com'
  response:
    code: 302
    raw: []
- request: GET 'codereview/api/v2/accounts/me'
  response:
    code: 200
    json:
      data:
        created: '2013-12-27 02:24:09.669030'
        default_column_width: 80
        default_context: 10
        email: test@example.com
        fresh: true
        lower_email: test@example.com
        lower_nickname: test (689)
        modified: '2013-12-27 02:24:09.669030'
        nickname: test (689)
        notify_by_chat: false
        notify_by_email: true
        user: test@example.com
        xsrf: eyJzdGFtcCI6IDEzODgxMTEwNDksICJ0YWciOiAiNDg1NjJjNGIzODQ3ZmE4ZTIxZDJhOGNmMjJhMTcxNWNiNGJkOTZiMjZjOWYwMmIyY2NhYjUyOWNkZWI3Yjk2ZiJ9
      status:
        code: 200
        type: OK
- request: PUT 'codereview/api/v2/cas_entries'
  response:
    code: 200
    json:
      data:
      - charset: utf-8
        content_type: text/plain
        csum: 214cf04c429f54b3f5398b9b7c767d49ad4489c9f09b235617db1286e5a403b9
        salt: rD00maqzPZFM4LshE9+h9Rrp1D2SGfBZ91htgd+IdqM=
        size: 69
      - charset: utf-8
        content_type: text/plain
        csum: 0025c5f4a339c0a99a3a15a286c02bb3f9ba801166c3699e913c34b3c765f6c9
        salt: gyrSpgkHriU3GgE6SJwYkHMp1OouC0BR/krV5Bo3KwI=
        size: 65
      status:
        code: 200
        type: OK
- request: POST 'codereview/api/v2/cas_entries/3844064d4b539405aa865e15aa232d21d94e8b02861552cedbad6a79faf9188c:509:application/patchset+json:utf-8'
  response:
    code: 201
    json:
      data:
        charset: utf-8
        content_type: application/patchset+json
        csum: 3844064d4b539405aa865e15aa232d21d94e8b02861552cedbad6a79faf9188c
        salt: 4MrZPnQO/j5i1WYGKOYLfyvagDvrZ+yXxSAGxZd9fDY=
        size: 509
      status:
        code: 201
        type: OK
- request: POST 'codereview/api/v2/issues'
  response:
    code: 201
    json:
      data:
        VERSION: 2
        approval_status: {}
        cc: []
        closed: false
        created: '2013-12-27 02:25:36.612107'
        description: 'A totes awesome haiku


          Seriously, it''s freaking sweet.'
        id: 5629499534213120
        modified: '2013-12-27 02:25:36.612107'
        n_comments: 0
        n_messages: 0
        n_patchsets: 1
        owner: test@example.com
        private: false
        reviewers:
        - bob@gnarly.com
        subject: A totes awesome haiku
      status:
        code: 201
        type: OK
- request: POST 'codereview/api/v2/cas_entries/703035a1ef7789d8f4bdf710c679ba80bcdcde928fef2d2a0e2d3413ea871a88:66:text/plain:utf-8'
  response:
    code: 201
    json:
      data:
        charset: utf-8
        content_type: text/plain
        csum: 703035a1ef7789d8f4bdf710c679ba80bcdcde928fef2d2a0e2d3413ea871a88
        salt: 1luV2LNnU/Wu0jqksqVkEb2MA7XzXtOG4lktAqaB/5M=
        size: 66
      status:
        code: 201
        type: OK
- request: POST 'codereview/api/v2/cas_entries/f7c3d60ba1aae3736fea41c8741ea92c115bed59afdeb2c93bc8644d88916366:519:application/patchset+json:utf-8'
  response:
    code: 201
    json:
      data:
        charset: utf-8
        content_type: application/patchset+json
        csum: f7c3d60ba1aae3736fea41c8741ea92c115bed59afdeb2c93bc8644d88916366
        salt: 7DoiZkm/zqB4FrAwVuE6V1R9+2p0lq8OSc5spvx/ARU=
        size: 519
      status:
        code: 201
        type: OK
- request: POST 'codereview/api/v2/issues/5629499534213120/patchsets'
  response:
    code: 201
    json:
      data:
        comments: []
        created: '2013-12-27 02:26:36.354086'
        created_by: test@example.com
        data_ref:
          charset: utf-8
          content_type: application/patchset+json
          csum: f7c3d60ba1aae3736fea41c8741ea92c115bed59afdeb2c93bc8644d88916366
          size: 519
        id: 2
        message: null
      status:
        code: 201
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120'
  response:
    code: 200
    json:
      data:
        VERSION: 2
        approval_status: {}
        cc: []
        closed: false
        created: '2013-12-27 02:25:36.612107'
        description: 'A totes awesome haiku


          Seriously, it''s freaking sweet.'
        id: 5629499534213120
        modified: '2013-12-27 02:26:36.354086'
        n_comments: 0
        n_messages: 0
        n_patchsets: 2
        owner: test@example.com
        private: false
        reviewers:
        - bob@gnarly.com
        subject: A totes awesome haiku
      status:
        code: 200
        type: OK
- request: PUT 'codereview/api/v2/issues/5629499534213120'
  response:
    code: 200
    json:
      data:
        VERSION: 2
        approval_status: {}
        cc:
        - coolguy@fancydomain.co.uk
        closed: false
        created: '2013-12-27 02:25:36.612107'
        description: 'A totes awesome haiku


          Seriously, it''s freaking sweet.'
        id: 5629499534213120
        modified: '2013-12-27 02:28:04.211244'
        n_comments: 0
        n_messages: 0
        n_patchsets: 2
        owner: test@example.com
        private: false
        reviewers:
        - bob@gnarly.com
        subject: A totes awesome haiku
      status:
        code: 200
        type: OK
- request: POST 'codereview/api/v2/issues'
  response:
    code: 400
    comments:
    - Should fail because we cannot send a message without anyone to send it to
    json:
      data:
        msg: Cannot send_message with no-one to send to.
      status:
        code: 400
        type: ERROR
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets'
  response:
    code: 200
    json:
      data:
      - comments: []
        created: '2013-12-27 02:25:36.612107'
        created_by: test@example.com
        data_ref:
          charset: utf-8
          content_type: application/patchset+json
          csum: 3844064d4b539405aa865e15aa232d21d94e8b02861552cedbad6a79faf9188c
          size: 509
        id: 1
        message: null
      - comments: []
        created: '2013-12-27 02:26:36.354086'
        created_by: test@example.com
        data_ref:
          charset: utf-8
          content_type: application/patchset+json
          csum: f7c3d60ba1aae3736fea41c8741ea92c115bed59afdeb2c93bc8644d88916366
          size: 519
        id: 2
        message: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1'
  response:
    code: 200
    json:
      data:
        comments: []
        created: '2013-12-27 02:25:36.612107'
        created_by: test@example.com
        data_ref:
          charset: utf-8
          content_type: application/patchset+json
          csum: 3844064d4b539405aa865e15aa232d21d94e8b02861552cedbad6a79faf9188c
          size: 509
        id: 1
        message: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/diff'
  response:
    code: 200
    raw:
    - diff --git a/path/to/haiku.txt b/different/path/to/haiku.txt
    - similarity index 50%
    - rename from path/to/haiku.txt
    - rename to different/path/to/haiku.txt
    - index a049b14093aa39f098039262e72be845a1355107..2c1190497106feb4cf1f14aedc9aa4326375954f
      100644
    - '--- a/path/to/haiku.txt fake timestamp'
    - +++ b/different/path/to/haiku.txt fake timestamp
    - '@@ -1,4 +1,4 @@'
    - ' '
    - ' Waters move softly'
    - -The lake gently beckons you
    - -Slip into it's grave
    - +The hat gently pokes you
    - +Put it on your face
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/patches'
  response:
    code: 200
    json:
      data:
      - action: rename
        comments: []
        id: 1
        new:
          data:
            charset: utf-8
            content_type: text/plain
            csum: 0025c5f4a339c0a99a3a15a286c02bb3f9ba801166c3699e913c34b3c765f6c9
            size: 65
          mode: 33188
          path: different/path/to/haiku.txt
          timestamp: fake timestamp
        next: null
        next_with_comment: null
        old:
          data:
            charset: utf-8
            content_type: text/plain
            csum: 214cf04c429f54b3f5398b9b7c767d49ad4489c9f09b235617db1286e5a403b9
            size: 69
          mode: 33188
          path: path/to/haiku.txt
          timestamp: fake timestamp
        prev: null
        prev_with_comment: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/patches/1'
  response:
    code: 200
    json:
      data:
        action: rename
        comments: []
        id: 1
        new:
          data:
            charset: utf-8
            content_type: text/plain
            csum: 0025c5f4a339c0a99a3a15a286c02bb3f9ba801166c3699e913c34b3c765f6c9
            size: 65
          mode: 33188
          path: different/path/to/haiku.txt
          timestamp: fake timestamp
        next: null
        next_with_comment: null
        old:
          data:
            charset: utf-8
            content_type: text/plain
            csum: 214cf04c429f54b3f5398b9b7c767d49ad4489c9f09b235617db1286e5a403b9
            size: 69
          mode: 33188
          path: path/to/haiku.txt
          timestamp: fake timestamp
        prev: null
        prev_with_comment: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/patches/4'
  response:
    code: 404
    json:
      data:
        msg: Key('Issue', 5629499534213120, 'Patchset', 1, '$Patches', 4) was not
          found.
      status:
        code: 404
        type: ERROR
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/patches/1/diff'
  response:
    code: 200
    raw:
    - diff --git a/path/to/haiku.txt b/different/path/to/haiku.txt
    - similarity index 50%
    - rename from path/to/haiku.txt
    - rename to different/path/to/haiku.txt
    - index a049b14093aa39f098039262e72be845a1355107..2c1190497106feb4cf1f14aedc9aa4326375954f
      100644
    - '--- a/path/to/haiku.txt fake timestamp'
    - +++ b/different/path/to/haiku.txt fake timestamp
    - '@@ -1,4 +1,4 @@'
    - ' '
    - ' Waters move softly'
    - -The lake gently beckons you
    - -Slip into it's grave
    - +The hat gently pokes you
    - +Put it on your face
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/patches/1/diff/2/1'
  response:
    code: 200
    raw:
    - diff --git a/different/path/to/haiku.txt b/different/path/to/haiku.txt
    - index 2c1190497106feb4cf1f14aedc9aa4326375954f..418e60cc864448935b42a2720a6d0316c167bb68
      33188
    - '--- a/different/path/to/haiku.txt fake timestamp'
    - +++ b/different/path/to/haiku.txt different fake timestamp
    - '@@ -1,4 +1,4 @@'
    - ' '
    - -Waters move softly
    - +Waters move quickly
    - ' The hat gently pokes you'
    - ' Put it on your face'
- request: DELETE 'codereview/api/v2/issues/5629499534213120/patchsets/1'
  response:
    code: 200
    json:
      data: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets'
  response:
    code: 200
    json:
      data:
      - comments: []
        created: '2013-12-27 02:26:36.354086'
        created_by: test@example.com
        data_ref:
          charset: utf-8
          content_type: application/patchset+json
          csum: f7c3d60ba1aae3736fea41c8741ea92c115bed59afdeb2c93bc8644d88916366
          size: 519
        id: 2
        message: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1'
  response:
    code: 404
    json:
      data:
        msg: Key('Issue', 5629499534213120, 'Patchset', 1) was not found.
      status:
        code: 404
        type: ERROR
- request: GET 'codereview/api/v2/issues/5629499534213120/patchsets/1/patches/1'
  response:
    code: 404
    json:
      data:
        msg: Key('Issue', 5629499534213120, 'Patchset', 1) was not found.
      status:
        code: 404
        type: ERROR
- request: DELETE 'codereview/api/v2/issues/5629499534213120'
  response:
    code: 200
    json:
      data: null
      status:
        code: 200
        type: OK
- request: GET 'codereview/api/v2/issues/5629499534213120'
  response:
    code: 404
    comments:
    - Deleted issues should yield the same error as issues which never existed in
      the first place.
    json:
      data:
        msg: Key('Issue', 5629499534213120) was not found.
      status:
        code: 404
        type: ERROR
- request: GET 'codereview/api/v2/issues/5629499534213121'
  response:
    code: 404
    json:
      data:
        msg: Key('Issue', 5629499534213121) was not found.
      status:
        code: 404
        type: ERROR
